--dotnet ef migrations script MigracaoUsuario MigracaoUmParaUm -o ./scriptMigracaoUmParaUm.sql 

BEGIN TRANSACTION;
GO

ALTER TABLE [Armas] ADD [PersonagemId] int NOT NULL DEFAULT 0;
GO

IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Dano', N'Nome', N'PersonagemId') AND [object_id] = OBJECT_ID(N'[Armas]'))
    SET IDENTITY_INSERT [Armas] ON;
INSERT INTO [Armas] ([Id], [Dano], [Nome], [PersonagemId])
VALUES (1, 35, N'Arco e Flecha', 1),
(2, 33, N'Espada', 2),
(3, 31, N'Machado', 3);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Dano', N'Nome', N'PersonagemId') AND [object_id] = OBJECT_ID(N'[Armas]'))
    SET IDENTITY_INSERT [Armas] OFF;
GO

UPDATE [Usuarios] SET [PasswordHash] = 0x521A4CB3C0388335B443D3B9B971E96404A1D0D86A0FDBF9E4CA797401ADA6ADB13A361288088267AD4944F11C6B5CB0CE4292C601488F38510F0D2DC2E8EF08, [PasswordSalt] = 0xDEB557F6D6AE4BBF5F8CA232F027141CE9373A47F4925BF966CDCD0D5D1B18E1DE1351B1BA685330B0E956E976C38AE8082324D63D30B6C51C5030A3AD25DC7FB43A827BE42DFD66981030C62F6645E4A7D4957A89EEBE1B651B557C3785C58EA9B57E4248E37F26A2BC81A3A906BD994C6934610AB2095966B0EEE16581EACA
WHERE [Id] = 1;
SELECT @@ROWCOUNT;

GO

CREATE UNIQUE INDEX [IX_Armas_PersonagemId] ON [Armas] ([PersonagemId]);
GO

ALTER TABLE [Armas] ADD CONSTRAINT [FK_Armas_Personagens_PersonagemId] FOREIGN KEY ([PersonagemId]) REFERENCES [Personagens] ([Id]) ON DELETE CASCADE;
GO

INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220406153523_MigracaoUmParaUm', N'5.0.15');
GO

COMMIT;
GO

